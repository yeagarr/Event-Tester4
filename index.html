<!doctype html>
<html lang="id">
<head>
  <!-- =========================================================
    BLOK 1 — META / SEO / PWA-LITE
  ========================================================== -->
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <meta name="color-scheme" content="dark light" />
  <meta name="theme-color" content="#070612" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <title>Thunder Vault Weekly — Bonus Rolling SLOT 0.5%</title>
  <meta name="description" content="Event mingguan: capai TO SLOT minimal 500rb dalam 1 minggu, buka brankas dan klaim bonus rolling 0,5%." />

  <!-- =========================================================
    BLOK 2 — FONTS
  ========================================================== -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800;900&display=swap" rel="stylesheet">

  <style>
    /* =========================================================
      BLOK 3 — THEME TOKENS (VISION / THUNDER)
    ========================================================== */
    :root{
      --bg0:#070612;
      --bg1:#120a2d;
      --bg2:#1a0f3f;

      --glass: rgba(255,255,255,.08);
      --glass2: rgba(255,255,255,.06);
      --stroke: rgba(255,255,255,.14);
      --stroke2: rgba(255,255,255,.10);

      --text: rgba(255,255,255,.92);
      --muted: rgba(255,255,255,.68);
      --faint: rgba(255,255,255,.50);

      --gold:#ffda6b;
      --gold2:#ffb84a;
      --lime:#7dffb2;
      --cyan:#4de7ff;
      --violet:#b07cff;
      --pink:#ff69d4;

      --danger:#ff4d6d;
      --ok:#39ffa0;

      --shadow: 0 18px 70px rgba(0,0,0,.55);
      --shadow2: 0 10px 35px rgba(0,0,0,.35);
      --radius: 22px;

      --easeOut: cubic-bezier(.16,1,.3,1);
      --easeIn: cubic-bezier(.7,0,.2,1);
      --easeSpring: cubic-bezier(.16,1.4,.3,1);
      --durFast: 180ms;
      --dur: 320ms;
      --durSlow: 700ms;

      --targetTO: 500000;
      --rate: 0.005; /* 0.5% */
    }

    /* =========================================================
      BLOK 4 — RESET / BASE
    ========================================================== */
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:var(--text);
      background:
        radial-gradient(1200px 800px at 18% 10%, rgba(176,124,255,.18), transparent 55%),
        radial-gradient(900px 600px at 80% 20%, rgba(77,231,255,.14), transparent 48%),
        radial-gradient(900px 700px at 55% 92%, rgba(255,105,212,.10), transparent 56%),
        linear-gradient(180deg, var(--bg0), var(--bg1) 50%, var(--bg2));
      overflow-x:hidden;
    }
    a{color:inherit}
    .wrap{
      width:min(1120px, calc(100% - 40px));
      margin: 0 auto;
      padding: 28px 0 44px;
    }

    /* =========================================================
      BLOK 5 — BACKDROP SPARKS + NOISE (NO IMAGE REQUIRED)
    ========================================================== */
    .fx{
      position:fixed; inset:0;
      pointer-events:none;
      z-index:0;
    }
    .noise{
      position:absolute; inset:-30%;
      opacity:.26;
      background-image:
        url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='220' height='220'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='220' height='220' filter='url(%23n)' opacity='.45'/%3E%3C/svg%3E");
      transform: rotate(7deg);
      mix-blend-mode: overlay;
    }
    .sparks{
      position:absolute; inset:0;
      background:
        radial-gradient(2px 2px at 10% 22%, rgba(255,255,255,.55), transparent 60%),
        radial-gradient(2px 2px at 22% 70%, rgba(255,255,255,.35), transparent 60%),
        radial-gradient(2px 2px at 38% 18%, rgba(255,255,255,.45), transparent 60%),
        radial-gradient(2px 2px at 52% 40%, rgba(255,255,255,.27), transparent 60%),
        radial-gradient(2px 2px at 66% 22%, rgba(255,255,255,.44), transparent 60%),
        radial-gradient(2px 2px at 78% 62%, rgba(255,255,255,.33), transparent 60%),
        radial-gradient(2px 2px at 90% 28%, rgba(255,255,255,.40), transparent 60%);
      opacity:.32;
      filter: blur(.2px);
      animation: floatSparks 12s var(--easeOut) infinite alternate;
    }
    .aurora{
      position:absolute; inset:-10%;
      background:
        radial-gradient(600px 340px at 18% 20%, rgba(176,124,255,.28), transparent 60%),
        radial-gradient(560px 320px at 78% 22%, rgba(77,231,255,.20), transparent 62%),
        radial-gradient(520px 320px at 55% 88%, rgba(255,105,212,.12), transparent 60%);
      filter: blur(22px) saturate(140%);
      opacity:.75;
      animation: aurora 10s var(--easeOut) infinite alternate;
    }
    @keyframes floatSparks{
      from{transform: translateY(-8px)}
      to{transform: translateY(10px)}
    }
    @keyframes aurora{
      from{transform: translate3d(-1.2%, -0.8%, 0) scale(1)}
      to{transform: translate3d(1.2%, 0.8%, 0) scale(1.02)}
    }

    /* =========================================================
      BLOK 6 — LAYOUT: HEADER / GRID
    ========================================================== */
    .topbar{
      position:relative;
      z-index:1;
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:18px;
      margin-bottom: 18px;
    }
    .brand{
      display:flex; gap:14px; align-items:center;
    }
    .badge{
      width:46px; height:46px;
      border-radius: 16px;
      background:
        radial-gradient(20px 20px at 30% 25%, rgba(255,255,255,.35), transparent 55%),
        radial-gradient(60px 60px at 40% 65%, rgba(176,124,255,.22), transparent 62%),
        linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.03));
      border: 1px solid var(--stroke);
      box-shadow: var(--shadow2);
      position:relative;
      overflow:hidden;
    }
    .badge:after{
      content:"";
      position:absolute; inset:-40%;
      background: conic-gradient(from 30deg, rgba(255,218,107,.0), rgba(255,218,107,.35), rgba(77,231,255,.22), rgba(176,124,255,.18), rgba(255,218,107,.0));
      filter: blur(10px);
      animation: spin 8s linear infinite;
      opacity:.85;
    }
    @keyframes spin { to { transform: rotate(360deg); } }
    .brand h1{
      margin:0;
      font-size: 18px;
      letter-spacing:.2px;
      line-height: 1.1;
    }
    .brand p{
      margin: 6px 0 0;
      color: var(--muted);
      font-size: 13px;
      line-height: 1.35;
    }

    .altNames{
      display:flex; gap:10px; flex-wrap:wrap;
      justify-content:flex-end;
      align-items:center;
      padding-top: 2px;
    }
    .pill{
      border: 1px solid var(--stroke2);
      background: rgba(255,255,255,.06);
      color: rgba(255,255,255,.78);
      padding: 8px 10px;
      border-radius: 999px;
      font-size: 12px;
      backdrop-filter: blur(10px) saturate(150%);
      -webkit-backdrop-filter: blur(10px) saturate(150%);
      box-shadow: 0 8px 22px rgba(0,0,0,.25);
      user-select:none;
    }

    .grid{
      position:relative;
      z-index:1;
      display:grid;
      grid-template-columns: 1.2fr .8fr;
      gap: 16px;
    }
    @media (max-width: 920px){
      .grid{grid-template-columns: 1fr}
      .altNames{justify-content:flex-start}
      .topbar{flex-direction:column}
    }

    /* =========================================================
      BLOK 7 — CARDS / GLASS
    ========================================================== */
    .card{
      border-radius: var(--radius);
      background: linear-gradient(180deg, rgba(255,255,255,.09), rgba(255,255,255,.05));
      border: 1px solid var(--stroke);
      box-shadow: var(--shadow);
      overflow:hidden;
      position:relative;
    }
    .card .inner{
      padding: 18px 18px 16px;
    }
    .cardTitle{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      margin-bottom: 12px;
    }
    .cardTitle h2{
      margin:0;
      font-size: 14px;
      font-weight: 800;
      letter-spacing:.25px;
      color: rgba(255,255,255,.88);
    }
    .sub{
      color: var(--muted);
      font-size: 12px;
      line-height: 1.35;
      margin: 0;
    }
    .chip{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding: 8px 12px;
      border-radius: 999px;
      border: 1px solid var(--stroke2);
      background: rgba(0,0,0,.18);
      color: rgba(255,255,255,.84);
      font-size: 12px;
      backdrop-filter: blur(10px) saturate(150%);
      -webkit-backdrop-filter: blur(10px) saturate(150%);
    }
    .dot{
      width:9px; height:9px; border-radius:50%;
      background: rgba(255,255,255,.25);
      box-shadow: 0 0 0 2px rgba(255,255,255,.10);
    }
    .dot.ok{ background: rgba(57,255,160,.85); box-shadow: 0 0 0 2px rgba(57,255,160,.18), 0 0 24px rgba(57,255,160,.25); }
    .dot.lock{ background: rgba(255,218,107,.75); box-shadow: 0 0 0 2px rgba(255,218,107,.18), 0 0 24px rgba(255,218,107,.22); }

    /* =========================================================
      BLOK 8 — VAULT METER (MAIN)
    ========================================================== */
    .vaultHero{
      display:grid;
      grid-template-columns: 1fr 260px;
      gap: 16px;
      align-items:stretch;
    }
    @media (max-width: 640px){
      .vaultHero{grid-template-columns: 1fr}
    }

    .meterBox{
      border-radius: 20px;
      border: 1px solid var(--stroke2);
      background: rgba(0,0,0,.18);
      padding: 14px;
      position:relative;
      overflow:hidden;
    }
    .meterBox:before{
      content:"";
      position:absolute; inset:-40%;
      background:
        radial-gradient(260px 180px at 24% 30%, rgba(176,124,255,.22), transparent 65%),
        radial-gradient(280px 180px at 78% 60%, rgba(77,231,255,.18), transparent 66%),
        radial-gradient(220px 160px at 50% 70%, rgba(255,218,107,.14), transparent 70%);
      filter: blur(10px);
      opacity:.85;
      transform: rotate(-6deg);
    }
    .meterBox > *{ position:relative; z-index:1; }

    .meterTop{
      display:flex;
      justify-content:space-between;
      align-items:flex-start;
      gap:12px;
      margin-bottom: 12px;
    }
    .big{
      font-size: 22px;
      font-weight: 900;
      letter-spacing: .2px;
      margin:0;
      line-height: 1.1;
    }
    .metaLine{
      margin-top: 6px;
      color: var(--muted);
      font-size: 12px;
      line-height: 1.35;
    }

    .bar{
      width:100%;
      height: 14px;
      border-radius: 999px;
      background: rgba(255,255,255,.08);
      border: 1px solid rgba(255,255,255,.10);
      overflow:hidden;
      position:relative;
    }
    .barFill{
      height:100%;
      width: 0%;
      border-radius: 999px;
      background:
        linear-gradient(90deg,
          rgba(176,124,255,.95),
          rgba(77,231,255,.90),
          rgba(255,218,107,.92)
        );
      box-shadow:
        0 0 0 1px rgba(255,255,255,.12) inset,
        0 8px 22px rgba(176,124,255,.18),
        0 8px 22px rgba(77,231,255,.12);
      transition: width var(--durSlow) var(--easeOut);
      position:relative;
    }
    .barFill:after{
      content:"";
      position:absolute; inset:-40%;
      background:
        linear-gradient(120deg,
          transparent 0%,
          rgba(255,255,255,.35) 20%,
          transparent 45%
        );
      transform: translateX(-60%);
      animation: shine 1.9s var(--easeOut) infinite;
      opacity:.65;
    }
    @keyframes shine{
      0%{ transform: translateX(-70%) rotate(6deg); }
      100%{ transform: translateX(70%) rotate(6deg); }
    }

    .milestones{
      display:flex;
      justify-content:space-between;
      margin-top: 10px;
      gap: 10px;
      color: rgba(255,255,255,.62);
      font-size: 11px;
    }
    .ms{
      display:flex; align-items:center; gap:8px;
    }
    .tick{
      width:10px; height:10px; border-radius:50%;
      border: 1px solid rgba(255,255,255,.22);
      background: rgba(0,0,0,.12);
    }
    .tick.on{
      background: rgba(57,255,160,.85);
      border-color: rgba(57,255,160,.35);
      box-shadow: 0 0 0 2px rgba(57,255,160,.12);
    }

    /* =========================================================
      BLOK 9 — VAULT VISUAL (RIGHT SIDE)
    ========================================================== */
    .vaultVisual{
      border-radius: 20px;
      border: 1px solid var(--stroke2);
      background: rgba(0,0,0,.18);
      padding: 14px;
      position:relative;
      overflow:hidden;
      display:flex;
      flex-direction:column;
      justify-content:space-between;
      gap: 12px;
    }
    .vaultArt{
      height: 150px;
      border-radius: 18px;
      background:
        radial-gradient(120px 120px at 30% 30%, rgba(255,255,255,.18), transparent 55%),
        radial-gradient(160px 140px at 70% 45%, rgba(255,218,107,.20), transparent 62%),
        radial-gradient(240px 180px at 50% 80%, rgba(176,124,255,.18), transparent 68%),
        linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.05));
      border: 1px solid rgba(255,255,255,.12);
      position:relative;
      overflow:hidden;
      box-shadow: 0 14px 40px rgba(0,0,0,.35);
    }
    .vaultArt:before{
      content:"";
      position:absolute; inset:-40%;
      background: conic-gradient(from 90deg,
        rgba(255,218,107,.0),
        rgba(255,218,107,.38),
        rgba(77,231,255,.26),
        rgba(176,124,255,.22),
        rgba(255,218,107,.0)
      );
      filter: blur(12px);
      animation: spin 10s linear infinite;
      opacity:.72;
    }
    .vaultDoor{
      position:absolute; inset: 14px;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.18);
      backdrop-filter: blur(12px) saturate(150%);
      -webkit-backdrop-filter: blur(12px) saturate(150%);
      box-shadow:
        0 0 0 1px rgba(255,255,255,.08) inset,
        0 16px 40px rgba(0,0,0,.32);
      display:flex;
      align-items:center;
      justify-content:center;
      transform-origin: 50% 50%;
      transition: transform var(--durSlow) var(--easeSpring), filter var(--dur) var(--easeOut);
    }
    .vaultDoor strong{
      font-size: 12px;
      letter-spacing:.28px;
      color: rgba(255,255,255,.78);
      text-transform: uppercase;
    }
    .vaultDoor.unlocked{
      transform: scale(1.02);
      filter: drop-shadow(0 18px 30px rgba(57,255,160,.10));
    }
    .bolt{
      position:absolute;
      width: 10px; height: 10px;
      border-radius: 50%;
      background: rgba(255,255,255,.22);
      box-shadow: 0 0 0 2px rgba(255,255,255,.08);
    }
    .b1{top:12px; left:12px}
    .b2{top:12px; right:12px}
    .b3{bottom:12px; left:12px}
    .b4{bottom:12px; right:12px}

    .countdown{
      display:grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 10px;
    }
    .tbox{
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.06);
      padding: 10px 10px;
      text-align:center;
    }
    .tbox b{
      display:block;
      font-size: 16px;
      letter-spacing: .3px;
    }
    .tbox span{
      display:block;
      margin-top: 4px;
      font-size: 11px;
      color: rgba(255,255,255,.62);
    }

    /* =========================================================
      BLOK 10 — SIDE PANEL (BONUS + CLAIM + SIMULATOR)
    ========================================================== */
    .stack{
      display:flex;
      flex-direction:column;
      gap: 16px;
    }

    .row{
      display:flex;
      justify-content:space-between;
      gap: 12px;
      align-items:center;
      padding: 10px 12px;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.16);
    }
    .row .label{
      color: rgba(255,255,255,.72);
      font-size: 12px;
    }
    .row .value{
      font-weight: 900;
      letter-spacing:.2px;
    }

    .btns{
      display:flex;
      gap: 10px;
      flex-wrap:wrap;
    }
    button{
      appearance:none;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.08);
      color: rgba(255,255,255,.92);
      padding: 11px 12px;
      font-weight: 800;
      border-radius: 16px;
      cursor:pointer;
      box-shadow: 0 12px 30px rgba(0,0,0,.25);
      transition: transform var(--durFast) var(--easeOut), background var(--durFast) var(--easeOut), opacity var(--durFast) var(--easeOut);
      user-select:none;
    }
    button:hover{ transform: translateY(-1px); background: rgba(255,255,255,.10); }
    button:active{ transform: translateY(0px) scale(.99); }
    button.primary{
      border-color: rgba(57,255,160,.22);
      background:
        linear-gradient(180deg, rgba(57,255,160,.18), rgba(57,255,160,.10));
    }
    button.primary[disabled]{
      opacity:.48;
      cursor:not-allowed;
      transform:none;
    }
    button.ghost{
      background: rgba(0,0,0,.12);
    }

    .hint{
      margin: 10px 0 0;
      color: rgba(255,255,255,.64);
      font-size: 12px;
      line-height: 1.45;
    }

    /* =========================================================
      BLOK 11 — HISTORY
    ========================================================== */
    .hist{
      display:flex;
      flex-direction:column;
      gap: 10px;
    }
    .hitem{
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.14);
      padding: 12px;
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap: 10px;
    }
    .hitem b{font-size:12px}
    .hitem small{
      display:block;
      margin-top: 6px;
      color: rgba(255,255,255,.64);
      font-size: 11px;
      line-height: 1.35;
    }
    .tag{
      font-size: 11px;
      font-weight: 900;
      padding: 7px 9px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
      white-space:nowrap;
      align-self:flex-start;
    }
    .tag.ok{
      border-color: rgba(57,255,160,.22);
      background: rgba(57,255,160,.12);
    }
    .tag.pending{
      border-color: rgba(255,218,107,.22);
      background: rgba(255,218,107,.10);
    }

    /* =========================================================
      BLOK 12 — TOAST
    ========================================================== */
    .toast{
      position: fixed;
      left: 50%;
      bottom: 22px;
      transform: translateX(-50%);
      z-index: 99;
      padding: 11px 12px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.46);
      backdrop-filter: blur(14px) saturate(160%);
      -webkit-backdrop-filter: blur(14px) saturate(160%);
      box-shadow: 0 18px 60px rgba(0,0,0,.45);
      color: rgba(255,255,255,.90);
      font-size: 12px;
      opacity:0;
      pointer-events:none;
      transition: opacity var(--dur) var(--easeOut), transform var(--dur) var(--easeOut);
    }
    .toast.show{
      opacity: 1;
      transform: translateX(-50%) translateY(-2px);
    }

    /* =========================================================
      BLOK 13 — MICRO ANIMS (UNLOCK / PULSE)
    ========================================================== */
    .pulse{
      animation: pulse 1.35s var(--easeOut) infinite;
    }
    @keyframes pulse{
      0%{ filter: drop-shadow(0 0 0 rgba(57,255,160,.0)); }
      50%{ filter: drop-shadow(0 0 24px rgba(57,255,160,.14)); }
      100%{ filter: drop-shadow(0 0 0 rgba(57,255,160,.0)); }
    }
    .shake{
      animation: shake .55s var(--easeOut) 1;
    }
    @keyframes shake{
      0%{ transform: translateX(0); }
      20%{ transform: translateX(-6px); }
      45%{ transform: translateX(5px); }
      70%{ transform: translateX(-3px); }
      100%{ transform: translateX(0); }
    }

    /* =========================================================
      BLOK 14 — FOOTER
    ========================================================== */
    footer{
      position:relative;
      z-index:1;
      margin-top: 18px;
      color: rgba(255,255,255,.58);
      font-size: 12px;
      line-height: 1.45;
    }
    .fine{
      margin: 8px 0 0;
      color: rgba(255,255,255,.52);
      font-size: 11px;
    }

    /* Accessibility */
    @media (prefers-reduced-motion: reduce){
      .sparks,.aurora,.barFill:after,.badge:after{animation:none !important}
      *{transition:none !important}
    }
  </style>
</head>

<body>
  <!-- FX LAYER -->
  <div class="fx" aria-hidden="true">
    <div class="aurora"></div>
    <div class="sparks"></div>
    <div class="noise"></div>
  </div>

  <div class="wrap">
    <!-- =========================================================
      BLOK 15 — TOPBAR + ALT NAMES (BONUS)
    ========================================================== -->
    <div class="topbar">
      <div class="brand">
        <div class="badge" aria-hidden="true"></div>
        <div>
          <h1>Thunder Vault Weekly</h1>
          <p>
            Capai <b>TO SLOT minimal 500.000</b> dalam <b>1 minggu</b>,
            lalu brankas terbuka dan bonus rolling <b>0,5%</b> bisa diklaim.
          </p>
        </div>
      </div>

      <div class="altNames" title="Nama alternatif tampilan (bonus)">
        <div class="pill">Weekly Rift Pass</div>
        <div class="pill">Storm Charger</div>
        <div class="pill">Olympus Relay</div>
      </div>
    </div>

    <div class="grid">
      <!-- =========================================================
        BLOK 16 — MAIN: VAULT METER + VISUAL
      ========================================================== -->
      <div class="card">
        <div class="inner">
          <div class="cardTitle">
            <h2>Progress Mingguan</h2>
            <div class="chip" id="statusChip">
              <span class="dot lock" id="statusDot"></span>
              <span id="statusText">Belum eligible</span>
            </div>
          </div>

          <div class="vaultHero">
            <!-- LEFT: Meter -->
            <div class="meterBox">
              <div class="meterTop">
                <div>
                  <p class="big" id="toNow">Rp 0</p>
                  <div class="metaLine">
                    Target unlock: <b id="toTarget">Rp 500.000</b> • Rate bonus: <b>0,5%</b>
                  </div>
                </div>
                <div style="text-align:right">
                  <p class="big" id="bonusNow">Rp 0</p>
                  <div class="metaLine">Estimasi bonus minggu ini</div>
                </div>
              </div>

              <div class="bar" aria-label="Progress TO Mingguan">
                <div class="barFill" id="barFill"></div>
              </div>

              <div class="milestones" aria-hidden="true">
                <div class="ms"><span class="tick" id="m25"></span><span>25%</span></div>
                <div class="ms"><span class="tick" id="m50"></span><span>50%</span></div>
                <div class="ms"><span class="tick" id="m75"></span><span>75%</span></div>
                <div class="ms"><span class="tick" id="m100"></span><span>100%</span></div>
              </div>
            </div>

            <!-- RIGHT: Vault visual + countdown -->
            <div class="vaultVisual">
              <div class="vaultArt" aria-hidden="true">
                <div class="vaultDoor" id="vaultDoor">
                  <span class="bolt b1"></span><span class="bolt b2"></span><span class="bolt b3"></span><span class="bolt b4"></span>
                  <strong id="vaultLabel">LOCKED</strong>
                </div>
              </div>

              <div>
                <p class="sub" style="margin:0 0 10px">
                  Reset mingguan (demo): countdown menuju akhir minggu.
                </p>
                <div class="countdown" id="countdown">
                  <div class="tbox"><b id="cdD">0</b><span>Hari</span></div>
                  <div class="tbox"><b id="cdH">0</b><span>Jam</span></div>
                  <div class="tbox"><b id="cdM">0</b><span>Menit</span></div>
                  <div class="tbox"><b id="cdS">0</b><span>Detik</span></div>
                </div>
              </div>
            </div>
          </div>

          <p class="hint" style="margin-top:14px">
            Ini <b>demo UI</b>. Untuk produksi, data TO & claim harus dari <b>API server</b> (Vercel function) biar tidak bisa dimanipulasi dari sisi browser.
          </p>
        </div>
      </div>

      <!-- =========================================================
        BLOK 17 — SIDE: BONUS / CLAIM / SIMULATOR / HISTORY
      ========================================================== -->
      <div class="stack">
        <div class="card">
          <div class="inner">
            <div class="cardTitle">
              <h2>Ringkasan Promo</h2>
              <div class="chip">
                <span class="dot lock" id="promoDot"></span>
                <span id="weekKey">Week</span>
              </div>
            </div>

            <div class="row">
              <div>
                <div class="label">Minimal TO SLOT / minggu</div>
                <div class="value" id="minTo">Rp 500.000</div>
              </div>
              <div style="text-align:right">
                <div class="label">Bonus rolling</div>
                <div class="value">0,5%</div>
              </div>
            </div>

            <div class="row" style="margin-top:10px">
              <div>
                <div class="label">Status</div>
                <div class="value" id="eligibleText">Belum eligible</div>
              </div>
              <div style="text-align:right">
                <div class="label">Bonus (estimasi)</div>
                <div class="value" id="bonusSide">Rp 0</div>
              </div>
            </div>

            <div class="btns" style="margin-top:12px">
              <button class="primary" id="btnClaim" disabled>Klaim Brankas</button>
              <button class="ghost" id="btnReset">Reset Demo</button>
            </div>

            <p class="hint">
              Klaim aktif hanya saat <b>eligible</b> (TO ≥ 500rb). Demo ini menyimpan state di <b>localStorage</b>.
            </p>
          </div>
        </div>

        <div class="card">
          <div class="inner">
            <div class="cardTitle">
              <h2>Simulator Demo (Tambah TO)</h2>
              <div class="chip"><span class="dot"></span><span>Mock</span></div>
            </div>

            <div class="btns">
              <button id="add50">+50.000</button>
              <button id="add100">+100.000</button>
              <button id="add250">+250.000</button>
              <button id="add1m">+1.000.000</button>
            </div>

            <p class="hint">
              Untuk integrasi real: ganti simulator jadi fetch ke endpoint misalnya <code>/api/weekly-stats</code>.
            </p>
          </div>
        </div>

        <div class="card">
          <div class="inner">
            <div class="cardTitle">
              <h2>Riwayat Mingguan (Demo)</h2>
              <div class="chip"><span class="dot"></span><span>2 minggu</span></div>
            </div>

            <div class="hist" id="history"></div>
          </div>
        </div>
      </div>
    </div>

    <footer>
      <div><b>S&K Singkat (demo)</b></div>
      <div class="fine">
        TO dihitung untuk kategori <b>SLOT</b>. Bet void/cancel/rollback tidak dihitung. Bonus = <b>0,5%</b> dari TO mingguan jika TO ≥ <b>500.000</b>. Keputusan final mengikuti sistem/backoffice.
      </div>
    </footer>
  </div>

  <div class="toast" id="toast">OK</div>

  <script>
    /* =========================================================
      BLOK 18 — DEMO LOGIC (LOCAL ONLY)
      - Simpan TO di localStorage
      - Hitung eligible + bonus
      - Countdown reset akhir minggu (Minggu 23:59:59)
    ========================================================== */
    (function(){
      const TARGET = Number(getCssVar('--targetTO')) || 500000;
      const RATE   = Number(getCssVar('--rate')) || 0.005;

      const els = {
        toNow: qs('#toNow'),
        toTarget: qs('#toTarget'),
        bonusNow: qs('#bonusNow'),
        barFill: qs('#barFill'),
        m25: qs('#m25'), m50: qs('#m50'), m75: qs('#m75'), m100: qs('#m100'),
        statusChip: qs('#statusChip'),
        statusDot: qs('#statusDot'),
        statusText: qs('#statusText'),
        vaultDoor: qs('#vaultDoor'),
        vaultLabel: qs('#vaultLabel'),

        cdD: qs('#cdD'), cdH: qs('#cdH'), cdM: qs('#cdM'), cdS: qs('#cdS'),

        weekKey: qs('#weekKey'),
        minTo: qs('#minTo'),
        eligibleText: qs('#eligibleText'),
        bonusSide: qs('#bonusSide'),
        promoDot: qs('#promoDot'),

        btnClaim: qs('#btnClaim'),
        btnReset: qs('#btnReset'),

        history: qs('#history'),
        toast: qs('#toast')
      };

      const buttons = {
        add50: qs('#add50'),
        add100: qs('#add100'),
        add250: qs('#add250'),
        add1m: qs('#add1m')
      };

      // --- State
      const KEY = 'thunderVaultDemo';
      const state = loadState();

      // init static UI
      els.toTarget.textContent = fmtIDR(TARGET);
      els.minTo.textContent = fmtIDR(TARGET);

      // initial render
      renderAll();

      // simulator actions
      buttons.add50.addEventListener('click', () => addTO(50000));
      buttons.add100.addEventListener('click', () => addTO(100000));
      buttons.add250.addEventListener('click', () => addTO(250000));
      buttons.add1m.addEventListener('click', () => addTO(1000000));

      els.btnReset.addEventListener('click', () => {
        localStorage.removeItem(KEY);
        toast('Reset demo berhasil');
        location.reload();
      });

      // claim logic (demo)
      els.btnClaim.addEventListener('click', () => {
        const { to, eligible, bonus } = compute(state.to);
        if(!eligible){
          nudgeLocked();
          toast('Belum eligible — capai TO 500rb dulu');
          return;
        }
        if(state.claimed){
          toast('Sudah diklaim minggu ini (demo)');
          return;
        }
        state.claimed = true;
        saveState();
        toast('Brankas berhasil diklaim (demo)');
        renderAll(true);
      });

      // countdown tick
      setInterval(() => {
        updateCountdown();
      }, 250);

      // ----------------- Functions
      function renderAll(justClaimed=false){
        const { to, eligible, bonus, pct } = compute(state.to);

        // numbers
        els.toNow.textContent = fmtIDR(to);
        els.bonusNow.textContent = eligible ? fmtIDR(bonus) : 'Rp 0';
        els.bonusSide.textContent = eligible ? fmtIDR(bonus) : 'Rp 0';

        // progress
        els.barFill.style.width = Math.max(0, Math.min(100, pct)) + '%';

        // milestones
        setOn(els.m25, pct >= 25);
        setOn(els.m50, pct >= 50);
        setOn(els.m75, pct >= 75);
        setOn(els.m100, pct >= 100);

        // status
        if(eligible){
          setChipEligible(true);
          els.vaultDoor.classList.add('unlocked');
          els.vaultLabel.textContent = state.claimed ? 'CLAIMED' : 'UNLOCKED';
          els.btnClaim.disabled = state.claimed ? true : false;
          els.btnClaim.textContent = state.claimed ? 'Sudah Diklaim' : 'Klaim Brankas';
          els.promoDot.classList.add('ok');
          els.promoDot.classList.remove('lock');
          els.promoDot.classList.add('ok');
        }else{
          setChipEligible(false);
          els.vaultDoor.classList.remove('unlocked');
          els.vaultLabel.textContent = 'LOCKED';
          els.btnClaim.disabled = true;
          els.btnClaim.textContent = 'Klaim Brankas';
          els.promoDot.classList.remove('ok');
          els.promoDot.classList.add('lock');
        }

        // eligible label
        els.eligibleText.textContent = eligible ? (state.claimed ? 'Eligible — sudah diklaim (demo)' : 'Eligible — siap klaim') : 'Belum eligible';

        // if claimed, add tiny pulse to vault
        els.vaultDoor.classList.toggle('pulse', eligible && !state.claimed);

        // week key
        els.weekKey.textContent = getWeekKey(new Date());

        // history
        renderHistory(to, bonus, eligible);

        // countdown
        updateCountdown();

        if(justClaimed){
          burst();
        }
      }

      function compute(toRaw){
        const to = Math.max(0, Math.floor(toRaw || 0));
        const eligible = to >= TARGET;
        const bonus = eligible ? Math.floor(to * RATE) : 0;
        const pct = Math.min(100, (to / TARGET) * 100);
        return { to, eligible, bonus, pct };
      }

      function addTO(amount){
        state.to = Math.max(0, (state.to || 0) + amount);
        // auto-unclaim if week changed would be server thing; for demo keep as is.
        saveState();
        renderAll();
        toast('TO bertambah: ' + fmtIDR(amount));
        // tiny feedback
        if(state.to < TARGET){
          els.vaultDoor.classList.add('shake');
          setTimeout(() => els.vaultDoor.classList.remove('shake'), 600);
        }
      }

      function setChipEligible(isOk){
        if(isOk){
          els.statusText.textContent = 'Eligible';
          els.statusDot.classList.add('ok');
          els.statusDot.classList.remove('lock');
          els.statusChip.style.borderColor = 'rgba(57,255,160,.22)';
        }else{
          els.statusText.textContent = 'Belum eligible';
          els.statusDot.classList.remove('ok');
          els.statusDot.classList.add('lock');
          els.statusChip.style.borderColor = 'rgba(255,255,255,.14)';
        }
      }

      function setOn(el, on){
        el.classList.toggle('on', !!on);
      }

      function renderHistory(thisTo, thisBonus, thisEligible){
        // Demo history: show current week + previous week dummy
        const now = new Date();
        const wk = getWeekKey(now);

        const prev = new Date(now.getTime() - 7*24*60*60*1000);
        const wkPrev = getWeekKey(prev);

        const items = [
          {
            week: wk,
            to: thisTo,
            eligible: thisEligible,
            bonus: thisEligible ? thisBonus : 0,
            status: thisEligible ? (state.claimed ? 'claimed' : 'unclaimed') : 'pending'
          },
          {
            week: wkPrev,
            to: 820000,
            eligible: true,
            bonus: Math.floor(820000 * RATE),
            status: 'claimed'
          }
        ];

        els.history.innerHTML = items.map(it => {
          const tagClass = it.eligible ? 'ok' : 'pending';
          const tagText = it.eligible ? (it.status === 'claimed' ? 'CLAIMED' : 'UNLOCKED') : 'LOCKED';
          const sub = it.eligible
            ? ('Bonus: ' + fmtIDR(it.bonus) + (it.status === 'claimed' ? ' • Sudah diklaim' : ' • Siap klaim'))
            : ('Capai TO ' + fmtIDR(TARGET) + ' untuk unlock');

          return `
            <div class="hitem">
              <div>
                <b>${escapeHtml(it.week)}</b>
                <small>TO: ${fmtIDR(it.to)}<br>${escapeHtml(sub)}</small>
              </div>
              <div class="tag ${tagClass}">${escapeHtml(tagText)}</div>
            </div>
          `;
        }).join('');
      }

      function updateCountdown(){
        const now = new Date();
        const end = endOfWeekSunday(now); // Minggu 23:59:59.999 local
        const ms = Math.max(0, end.getTime() - now.getTime());

        const s = Math.floor(ms / 1000);
        const d = Math.floor(s / 86400);
        const h = Math.floor((s % 86400) / 3600);
        const m = Math.floor((s % 3600) / 60);
        const sec = Math.floor(s % 60);

        els.cdD.textContent = String(d);
        els.cdH.textContent = pad2(h);
        els.cdM.textContent = pad2(m);
        els.cdS.textContent = pad2(sec);
      }

      function endOfWeekSunday(d){
        // JS: getDay() 0=Sunday ... 6=Saturday
        const date = new Date(d);
        const day = date.getDay();
        const diffToSunday = (7 - day) % 7; // if already sunday => 0
        date.setHours(23,59,59,999);
        date.setDate(date.getDate() + diffToSunday);
        return date;
      }

      function getWeekKey(date){
        // ISO-ish week key (simple): YYYY-W##
        // For demo: compute ISO week number
        const d = new Date(Date.UTC(date.getFullYear(), date.getMonth(), date.getDate()));
        const dayNum = d.getUTCDay() || 7;
        d.setUTCDate(d.getUTCDate() + 4 - dayNum);
        const yearStart = new Date(Date.UTC(d.getUTCFullYear(),0,1));
        const weekNo = Math.ceil((((d - yearStart) / 86400000) + 1) / 7);
        const y = d.getUTCFullYear();
        return `${y}-W${String(weekNo).padStart(2,'0')}`;
      }

      function loadState(){
        try{
          const raw = localStorage.getItem(KEY);
          if(!raw) return { to: 0, claimed: false };
          const p = JSON.parse(raw);
          return {
            to: Number(p.to || 0),
            claimed: !!p.claimed
          };
        }catch(e){
          return { to: 0, claimed: false };
        }
      }
      function saveState(){
        localStorage.setItem(KEY, JSON.stringify(state));
      }

      function toast(msg){
        els.toast.textContent = msg;
        els.toast.classList.add('show');
        clearTimeout(toast._t);
        toast._t = setTimeout(()=> els.toast.classList.remove('show'), 1500);
      }

      function nudgeLocked(){
        els.vaultDoor.classList.add('shake');
        setTimeout(() => els.vaultDoor.classList.remove('shake'), 600);
      }

      function burst(){
        // tiny celebratory pulse (no canvas, no images)
        els.vaultDoor.classList.add('pulse');
        setTimeout(() => els.vaultDoor.classList.remove('pulse'), 1200);
      }

      function fmtIDR(n){
        const v = Math.max(0, Math.floor(Number(n) || 0));
        return 'Rp ' + v.toLocaleString('id-ID');
      }

      function pad2(n){ return String(n).padStart(2,'0'); }
      function qs(s){ return document.querySelector(s); }
      function getCssVar(name){
        return getComputedStyle(document.documentElement).getPropertyValue(name).trim();
      }
      function escapeHtml(str){
        return String(str).replace(/[&<>"']/g, (m) => ({
          '&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'
        }[m]));
      }
    })();
  </script>
</body>
</html>
